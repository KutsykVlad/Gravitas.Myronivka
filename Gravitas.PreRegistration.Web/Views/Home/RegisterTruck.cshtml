@model dynamic

@{
    ViewBag.Title = "title";
}

@*<style>
    /*------>>> Animations <<<-----*/
    .fade {
        opacity: 0;
        -webkit-transition: opacity 0.25s ease-in;
        -moz-transition: opacity 0.25s ease-in;
        -o-transition: opacity 0.25s ease-in;
        -ms-transition: opacity 0.25s ease-in;
        transition: opacity 0.25s ease-in;
        transition-delay: 0.25s;
    }

    .fade.in {
        opacity: 1;
    }

    .animate-switch-container {
        position: relative;
        overflow: hidden;
        height: 500px;
        width: 550px;
        border: solid 1px black;
        box-shadow: 6px 6px 15px gray;
        padding: 10px;
        border-radius: 10px;
        background-size: 50px 50px;
    }

    .animate-switch {
        padding: 10px;
        width: 100%;
    }

    .animate-switch.ng-animate {
        -webkit-transition: all 0.5s;
        transition: all 0.5s;
        position: absolute;
    }
    /* hide leaving slide  */
    /* show */
    .animate-switch.ng-leave {
        left: 0;
    }
    /* hide */
    .forward .animate-switch.ng-leave.ng-leave-active {
        left: -100%;
    }

    .backward .animate-switch.ng-leave.ng-leave-active {
        left: 100%;
    }
    /* show entering slide  */
    /* hide */
    .forward .animate-switch.ng-enter {
        left: 100%;
    }

    .backward .animate-switch.ng-enter {
        left: -100%;
    }
    /* show */
    .animate-switch.ng-enter.ng-enter-active {
        left: 0;
    }


    /*-----------------------------------*/
    /*------>>> Validation <<<-----------*/
    /*-----------------------------------*/

    .form-validation input.ng-invalid-maxlength {
        border: 2px solid #D9272D;
    }


    .length-error {
        color: #D9272D;
        display: block;
        font-size: 12px;
        opacity: .8;
        -webkit-transition: all 0.3s;
        -moz-transition: all 0.3s;
        transition: all 0.3s;
        position: relative;
        line-height: 18px;
        padding: 10px 10px 5px 10px;
        margin: -25px 0 20px 0;
        background-color: #E3E3E3;
        border-radius: 0 0 5px 5px;
    }

    .input-error {
        border: 2px solid #D9272D;
    }

    /*-----------------------------------*/
    /*------->>> FORM STYLES <<<---------*/
    /*-----------------------------------*/

    .note {
        display: block;
        font-size: 12px;
        opacity: .8;
        -webkit-transition: all 0.3s;
        -moz-transition: all 0.3s;
        transition: all 0.3s;
        position: relative;
        line-height: 18px;
    }

    .note-input {
        padding: 10px 10px 5px 10px;
        margin: -25px 0 20px 0;
        background-color: #E3E3E3;
        border-radius: 0 0 5px 5px;
    }

    .note-input-error, .required-error-banner {
        background-color: rgba(217, 39, 45, 0.5);
    }

    /*-----------------------------------*/
    /*----------->>> HELPERS <<<-------------*/
    /*-----------------------------------*/

    /*
  Allow angular.js to be loaded in body, hiding cloaked elements until
  templates compile.  The !important is important given that there may be
  other selectors that are more specific or come later and might alter display.
 */
    [ng\:cloak], [ng-cloak], .ng-cloak {
        display: none;
    }
     
</style>*@

<style type="text/css">
    .form-style-10 {
        width: 550px;
        padding: 30px;
        margin: 40px auto;
        background: #FFF;
        border-radius: 10px;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.13);
        -moz-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.13);
        -webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.13);
    }

    .form-style-10 .inner-wrap {
        padding: 30px;
        background: #F8F8F8;
        border-radius: 6px;
        margin-bottom: 15px;
    }

    .form-style-10 h1 {
        background: #2A88AD;
        padding: 20px 30px 15px 30px;
        margin: -30px -30px 30px -30px;
        border-radius: 10px 10px 0 0;
        -webkit-border-radius: 10px 10px 0 0;
        -moz-border-radius: 10px 10px 0 0;
        color: #fff;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);
        font: normal 30px 'Bitter', serif;
        -moz-box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
        -webkit-box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
        border: 1px solid #257C9E;
    }

    .form-style-10 h1 > span {
        display: block;
        margin-top: 2px;
        font: 13px Arial, Helvetica, sans-serif;
    }

    .form-style-10 label {
        display: block;
        font: 13px Arial, Helvetica, sans-serif;
        color: #888;
        margin-bottom: 15px;
    }

    .form-style-10 input[type="text"],
    .form-style-10 input[type="date"],
    .form-style-10 input[type="datetime"],
    .form-style-10 input[type="email"],
    .form-style-10 input[type="number"],
    .form-style-10 input[type="search"],
    .form-style-10 input[type="time"],
    .form-style-10 input[type="url"],
    .form-style-10 input[type="password"],
    .form-style-10 textarea,
    .form-style-10 select {
        display: block;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        width: 100%;
        padding: 8px;
        border-radius: 6px;
        -webkit-border-radius: 6px;
        -moz-border-radius: 6px;
        border: 2px solid #fff;
        box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.33);
        -moz-box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.33);
        -webkit-box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.33);
    }

    .form-style-10 .section {
        font: normal 20px 'Bitter', serif;
        color: #2A88AD;
        margin-bottom: 5px;
    }

    .form-style-10 .section span {
        background: #2A88AD;
        padding: 5px 10px 5px 10px;
        position: absolute;
        border-radius: 50%;
        -webkit-border-radius: 50%;
        -moz-border-radius: 50%;
        border: 4px solid #fff;
        font-size: 14px;
        margin-left: -45px;
        color: #fff;
        margin-top: -3px;
    }

    .form-style-10 input[type="button"],
    .form-style-10 input[type="submit"] {
        background: #2A88AD;
        padding: 8px 20px 8px 20px;
        border-radius: 5px;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        color: #fff;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);
        font: normal 30px 'Bitter', serif;
        -moz-box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
        -webkit-box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
        border: 1px solid #257C9E;
        font-size: 15px;
    }

    .form-style-10 input[type="button"]:hover,
    .form-style-10 input[type="submit"]:hover {
        background: #2A6881;
        -moz-box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.28);
        -webkit-box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.28);
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.28);
    }

    .form-style-10 .privacy-policy {
        float: right;
        width: 250px;
        font: 12px Arial, Helvetica, sans-serif;
        color: #4D4D4D;
        margin-top: 10px;
        text-align: right;
    }
</style>

<div ng-controller="truckRegistrationController" ng-cloak ng-init='partnerId = "@ViewBag.partnerId"; partnerName="@ViewBag.partnerName"'>
    <div class="form-style-10" ng-switch on="stage" ng-class="{forward: direction, backward:!direction}">
        <h1>Попередня реєстрація<span>Зареєструйтесь зараз, тож потім ви менше пробудете в черзі</span></h1>
        <form name="truckForm" role="form" novalidate>
            <div ng-switch-default>
                <div class="section"><span>1</span>Попередня реєстрація у черзі</div>
                <div class="inner-wrap">
                    <h3>Вітаємо вас у системі попередньої реєстрації!</h3>
                </div>
                <div class="button-section">
                    <input type="button" ng-click="next('stage1')" value="Розпочати">
                </div>
            </div>
            <div ng-switch-when="stage1">
                <div class="section"><span>2</span>Вибір номенклатури</div>
                <div class="inner-wrap">
                    <label>Номенклатура</label>
                    <ui-select ng-model="ProductItems.selected" theme="select2" style="min-width: 300px; width: 500px;">
                        <ui-select-match class="ui-select-match" placeholder="Виберіть номенклатуру зі списку..." style="height: 35px; line-height: 35px;">{{ProductItems.selected.Key}}</ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="item in ProductItems">
                            <div ng-bind-html="item.Key"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="button-section">
                    <input type="button" class="btn btn-primary" ng-click="selectProduct()" value="Підтвердити">
                </div>
            </div>
            <div ng-switch-when="stage2">
                <div class="section"><span>3</span>Час реєстрації</div>
                <div class="inner-wrap">
                    <label>Орієнтований час в'їзду:</label>
                    <input type="text" class="form-control" ng-readonly="true" ng-model="availableTime" />
                </div>
                <button type="button" class="btn btn-info" ng-click="back('stage1')">Назад</button>
                <button type="button" class="btn btn-primary" ng-click="next('stage3')">Погодитись</button>
            </div>
            <div ng-switch-when="stage3">
                <div class="form-group">
                    <label for="TruckNo">Номер авто:</label>
                    <input type="text" class="form-control" id="TruckNo" name="TruckNo" ng-maxlength="250" required ng-class="{'input-error': formValidation && truckForm.TruckNo.$error.required}" ng-model="postItem.TruckNo" />
                    <label for="TrailerNo">Номер причепу:</label>
                    <input type="text" class="form-control" id="TrailerNo" name="TrailerNo" ng-maxlength="250" required ng-class="{'input-error': formValidation && truckForm.TrailerNo.$error.required}" ng-model="postItem.TrailerNo" />
                    <label for="phone">Телефон водія:</label>
                    <input type="number"
                           class="form-control"
                           ng-minlength="10"
                           ng-maxlength="10"
                           id="phone"
                           name="phone"
                           placeholder="Номер телефону"
                           ng-model="postItem.PhoneNo"
                           ng-required="true">
                    <span class="help-block"
                          ng-show="truckForm.phone.$error.required ||
                           truckForm.phone.$error.number">
                        Не вірно вказаний номер
                    </span>
                    <span class="help-block"
                          ng-show="((truckForm.phone.$error.minlength ||
                           truckForm.phone.$error.maxlength) &&
                           truckForm.phone.$dirty) ">
                        Номер телефону повинен містити 10 цифр
                    </span>
                </div>
                <button type="button" class="btn btn-info" ng-click="back('stage2')">Назад</button>
                <button type="button" class="btn btn-warning" ng-click="next('stage4')">Далі</button>
            </div>
            <div ng-switch-when="stage4">
                <h3>Підсумки</h3>
                <div class="form-group">
                    <label>Час в'їзду:</label>
                    <input type="text" class="form-control" ng-readonly="true" ng-model="availableTime" />
                    <label>Номенклатура:</label>
                    <input type="text" class="form-control" ng-readonly="true" ng-model="ProductItems.selected.Key" />
                    <label>Авто:</label>
                    <input type="text" class="form-control" ng-readonly="true" ng-model="postItem.TruckNo" />
                    <label>Причіп:</label>
                    <input type="text" class="form-control" ng-readonly="true" ng-model="postItem.TrailerNo" />
                    <label>Телефон водія:</label>
                    <input type="text" class="form-control" ng-readonly="true" ng-model="postItem.PhoneNo" />
                </div>
                <button type="button" class="btn btn-info" ng-click="back('stage3')">Назад</button>
                <button type="button" class="btn btn-warning" ng-click="submitForm()">Надіслати</button>

            </div>
            <div ng-switch-when="success">
                <div>
                    <h2>Дякуємо</h2>
                    <p>Вашу машину зареєстровано<br></p>
                    <div><button type="button" class="btn btn-success" ng-click="reset()">Зареєструвати ще одну</button></div>
                </div>
            </div>
            <div ng-switch-when="error">
                <div class="error-wrap">
                    <h2>Помилка</h2>
                    <p>Вибачте, виникла помилка при спробі реєстрації.<br>Будь ласка, спробуйте пізніше.</p>
                    <div><button type="button" class="btn btn-danger" ng-click="reset()">Спробувати ще раз</button></div>
                </div>
            </div>
        </form>
    </div>


</div>